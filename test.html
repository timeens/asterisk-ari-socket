<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
</head>
<body>

<script>

	let ws = new WebSocket('ws://localhost:8088');

	ws.onopen = () => {
		output('Client: sending ready event');
		ws.send(JSON.stringify({type:'HANDSHAKE'}));
	};
	ws.onmessage = (msg) => {
		var data = JSON.parse(msg.data);
		var error = data.error ? ' => ' + data.error : null;
		var string = data.type;
		if(error) string = string + error;
		output('Server: ' + string);
	};
	ws.onerror = (err) => {
		output(err);
	};
	ws.onclose = () => {
		output("connection closed");
	};


	function output(msg){
		var el = document.getElementById('output');
		el.innerHTML = el.innerHTML + "<br>" + msg;
	}
</script>

<div id="output"></div>

</body>
</html>