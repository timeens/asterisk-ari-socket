<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
</head>
<body>

<script>

	let ws = new WebSocket('ws://localhost:8088');

	ws.onopen = () => {
		output('Client: sending ready event');
		let action = {
			name:'HANDSHAKE',
			params:{
				sipNr:308
			}
		};
		ws.send(JSON.stringify(action));
	};
	ws.onmessage = (msg) => {
		var event = JSON.parse(msg.data);
		var error = event.errorCode ? ' => ' + event.errorCode : null;
		var string = event.name;
		if(error) string = string + error;
		output('Server: ' + string);
	};
	ws.onerror = (err) => {
		output(err);
	};
	ws.onclose = () => {
		output("connection closed");
	};


	function output(msg){
		var el = document.getElementById('output');
		el.innerHTML = el.innerHTML + "<br>" + msg;
	}
</script>

<div id="output"></div>

</body>
</html>